---
- hosts: localhost
  connection: local

  vars:
    applications:
      - alfred
      - neofetch

    install_oh_my_zsh: true

    brew_taps:
      - caskroom/cask

    brew_utils:
      - bash
      - brew-cask
      - git
      - hub
      - tmux
      - wget

    zsh_path: /usr/local/bin/zsh

    home: "{{ lookup('env','HOME') }}"


  tasks:
    - name: Check Homebrew is installed
      stat: path=/usr/local/bin/brew
      register: brew_installed

    - name: Install Homebrew
      shell: ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"
      when: brew_installed.stat.exists == false

#    - name: Install required Homebrew Taps
#      shell: brew tap {{ item }}
#      with_items: brew_taps

    - name: Check homebrew-cask is installed
      stat: path=/usr/local/bin/brew-cask.rb
      register: brew_cask_installed

    - name: Install homebrew-cask
      shell: brew install brew-cask-completion
      when: brew_cask_installed.stat.exists == false


    ### APPZ

    - name: Install Apps with brew-cask
      shell: brew install vlc --cask

    - name: Install App using brew_cask
      homebrew_cask:
        name: vlc      
    - name: Install htop
      homebrew:
        name: htop
    - name: Install neofetch
      homebrew:
        name: neofetch

